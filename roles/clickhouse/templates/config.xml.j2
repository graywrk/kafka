<?xml version="1.0"?>
<clickhouse>
    <logger>
        <level>trace</level>
        <log>{{ clickhouse_log_dir }}/clickhouse-server.log</log>
        <errorlog>{{ clickhouse_log_dir }}/clickhouse-server.err.log</errorlog>
        <size>1000M</size>
        <count>10</count>
    </logger>

    <http_port>{{ clickhouse_http_port }}</http_port>
    <tcp_port>{{ clickhouse_tcp_port }}</tcp_port>

    <listen_host>{{ clickhouse_host }}</listen_host>

    <max_connections>4096</max_connections>
    <keep_alive_timeout>3</keep_alive_timeout>
    <max_concurrent_queries>100</max_concurrent_queries>
    <uncompressed_cache_size>8589934592</uncompressed_cache_size>
    <mark_cache_size>5368709120</mark_cache_size>

    <path>{{ clickhouse_data_dir }}</path>
    <tmp_path>{{ clickhouse_data_dir }}/tmp/</tmp_path>

    <user_config>users.xml</user_config>
    <default_profile>default</default_profile>
    <default_database>default</default_database>

    <remote_servers incl="clickhouse_remote_servers" />
    <zookeeper incl="zookeeper-servers" optional="true" />
    <macros incl="macros" optional="true" />

    <builtin_dictionaries_reload_interval>3600</builtin_dictionaries_reload_interval>
    <max_session_timeout>3600</max_session_timeout>

    <default_session_timeout>60</default_session_timeout>
</clickhouse> 